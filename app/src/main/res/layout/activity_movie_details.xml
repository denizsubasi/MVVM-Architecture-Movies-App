<?xml version="1.0" encoding="utf-8"?>

<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="com.denizsubasi.moviesapp.domain.model.MoviesResponseItem" />

        <import type="com.denizsubasi.moviesapp.domain.model.MovieObject"/>

        <import type="com.denizsubasi.moviesapp.vo.Status" />

        <import type="com.denizsubasi.moviesapp.vo.Resource" />

        <import type="androidx.lifecycle.LiveData" />

        <import type="android.view.View" />


        <variable
            name="movie"
            type="com.denizsubasi.moviesapp.domain.model.MovieObject" />

        <variable
            name="isNotEmptyVoteAverage"
            type="Boolean" />

        <variable
            name="response"
            type="LiveData&lt;Resource&lt;MovieObject>>" />

        <variable
            name="retryCallback"
            type="com.denizsubasi.moviesapp.ui.flow.common.RetryCallback" />

    </data>

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/windowBackgroundColor"
        android:orientation="vertical">


        <com.google.android.material.appbar.AppBarLayout
            android:id="@+id/appBarLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:elevation="0dp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent">


            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:minHeight="200dp">

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/movieImage"
                    android:layout_width="0dp"
                    android:layout_height="0dp"
                    android:adjustViewBounds="true"
                    android:scaleType="centerCrop"
                    app:layout_collapseMode="parallax"
                    app:layout_collapseParallaxMultiplier="0.7"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:movieImage="@{movie.movieImageUrl()}"
                   />


                <androidx.appcompat.widget.AppCompatImageView
                    android:layout_width="match_parent"
                    android:layout_height="50dp"
                    android:background="@drawable/black_bg_top_to_bottom"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="@id/movieImage" />

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/playTrailer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_play"
                    android:visibility="gone"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/back"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="@dimen/small_margin"
                    android:src="@drawable/ic_back"
                    android:visibility="visible"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:tint="@android:color/white" />

                <androidx.appcompat.widget.AppCompatImageView
                    android:layout_width="match_parent"
                    android:layout_height="50dp"
                    android:background="@drawable/black_bg_bottom_to_top"
                    app:layout_constraintBottom_toBottomOf="@id/movieImage"
                    app:layout_constraintStart_toStartOf="parent" />

            </androidx.constraintlayout.widget.ConstraintLayout>


        </com.google.android.material.appbar.AppBarLayout>


        <androidx.cardview.widget.CardView
            android:id="@+id/cardViewMovieImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="10dp"
            app:cardCornerRadius="20dp"
            app:cardElevation="30dp"
            app:layout_constraintBottom_toBottomOf="@id/appBarLayout"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@id/appBarLayout">

            <androidx.appcompat.widget.AppCompatImageView
                android:id="@+id/movieImageSmall"
                android:layout_width="wrap_content"
                android:layout_height="200dp"
                android:adjustViewBounds="true"
                android:elevation="10dp"
                android:scaleType="fitXY"
                app:movieImage="@{movie.movieImageUrl()}"
               />
        </androidx.cardview.widget.CardView>

        <androidx.appcompat.widget.AppCompatTextView
            android:id="@+id/genres"
            style="@style/TextFieldStyle.Bold"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:fontFamily="@font/arimo_bold"
            android:padding="@dimen/small_margin"
            android:text="@{movie.getGenresText()}"
            android:textColor="@color/primaryPageTitleColor"
            app:autoSizeTextType="uniform"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toEndOf="@id/cardViewMovieImage"
            app:layout_constraintTop_toBottomOf="@id/appBarLayout"
            tools:text="3,292 People wathing Action, Adventure, Fantasy" />


        <androidx.appcompat.widget.AppCompatTextView
            android:id="@+id/movieRate"
            style="@style/TextFieldStyle.Bold"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="@dimen/small_margin"
            android:layout_marginTop="5dp"
            android:fontFamily="@font/arimo_bold_italic"
            android:text="@{String.valueOf(movie.voteAverage)}"
            android:textColor="@color/colorPrimaryDark"
            android:textSize="@dimen/text_size_large"
            android:visibility="@{isNotEmptyVoteAverage ? View.VISIBLE : View.GONE}"
            app:layout_constraintStart_toEndOf="@id/cardViewMovieImage"
            app:layout_constraintTop_toBottomOf="@id/genres"
            tools:text="9.7" />


        <RatingBar
            android:id="@+id/ratingBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:max="5"
            android:clickable="false"
            android:focusable="false"
            android:numStars="5"
            android:progressTint="@color/colorPrimaryDark"
            android:scaleX=".5"
            android:scaleY=".5"
            android:stepSize="1.1"
            android:transformPivotX="0dp"
            android:transformPivotY="0dp"
            android:visibility="@{isNotEmptyVoteAverage ? View.VISIBLE : View.GONE}"
            app:layout_constraintStart_toEndOf="@id/movieRate"
            app:layout_constraintTop_toBottomOf="@id/genres"
            tools:rating="4" />


        <androidx.appcompat.widget.AppCompatTextView
            android:id="@+id/movieName"
            style="@style/TextFieldStyle.PageTitle"
            android:layout_width="0dp"
            android:maxLines="2"
            android:padding="@dimen/small_margin"
            android:text="@{movie.title}"
            android:textColor="@android:color/white"
            android:textSize="@dimen/text_size_large"
            app:autoSizeMaxTextSize="@dimen/title_text_size"
            app:autoSizeMinTextSize="@dimen/text_size_small"
            app:autoSizeTextType="uniform"
            app:layout_constraintBottom_toBottomOf="@id/appBarLayout"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toEndOf="@id/cardViewMovieImage"
            tools:text="Narcos" />


        <androidx.core.widget.NestedScrollView
            android:id="@+id/layoutOverview"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:background="@android:color/white"
            android:orientation="vertical"
            android:scrollbarSize="4dp"
            android:scrollbars="vertical"
            app:layout_behavior="@string/appbar_scrolling_view_behavior"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@id/cardViewMovieImage">

            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/releaseDate"
                    style="@style/TextFieldStyle.Bold"
                    tools:text="Release Date: 3 eylÃ¼l 2018"
                    android:paddingStart="@dimen/small_margin"
                    android:paddingEnd="@dimen/small_margin"
                    android:textSize="@dimen/text_size_small"
                    android:paddingTop="@dimen/small_margin"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"/>

                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/runtime"
                    style="@style/TextFieldStyle.Bold"
                    tools:text="133 dakika"
                    android:paddingStart="@dimen/small_margin"
                    android:paddingEnd="@dimen/small_margin"
                    android:textSize="@dimen/text_size_small"
                    android:paddingTop="@dimen/small_margin"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/releaseDate"/>

                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/overview"
                    style="@style/TextFieldStyle"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:background="@android:color/white"
                    android:fontFamily="@font/arimo_bold"
                    android:padding="@dimen/small_margin"
                    android:text="@{movie.overview}"
                    android:visibility="@{movie.isOverviewEmpty() ? View.GONE : View.VISIBLE}"
                    app:autoSizeTextType="uniform"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/runtime"
                    tools:text="Neden KullanÄ±rÄ±z? Yinelenen bir sayfa iÃ§eriÄinin okuyucunun dikkatini daÄÄ±ttÄ±ÄÄ± bilinen bir gerÃ§ektir. Lorem Ipsum kullanmanÄ±n amacÄ±, sÃ¼rekli 'buraya metin gelecek, buraya metin gelecek' yazmaya kÄ±yasla daha dengeli bir harf daÄÄ±lÄ±mÄ± saÄlayarak okunurluÄu artÄ±rmasÄ±dÄ±r. Åu anda birÃ§ok masaÃ¼stÃ¼ yayÄ±ncÄ±lÄ±k paketi ve web sayfa dÃ¼zenleyicisi, varsayÄ±lan mÄ±gÄ±r metinler olarak Lorem Ipsum kullanmaktadÄ±r. AyrÄ±ca arama motorlarÄ±nda 'lorem ipsum' anahtar sÃ¶zcÃ¼kleri ile arama yapÄ±ldÄ±ÄÄ±nda henÃ¼z tasarÄ±m aÅamasÄ±nda olan Ã§ok sayÄ±da site listelenir. YÄ±llar iÃ§inde, bazen kazara, bazen bilinÃ§li olarak (Ã¶rneÄin mizah katÄ±larak), Ã§eÅitli sÃ¼rÃ¼mleri geliÅtirilmiÅtir. Nereden Gelir? YaygÄ±n inancÄ±n tersine, Lorem Ipsum rastgele sÃ¶zcÃ¼klerden oluÅmaz. KÃ¶kleri M.Ã. 45 tarihinden bu yana klasik Latin edebiyatÄ±na kadar uzanan 2000 yÄ±llÄ±k bir geÃ§miÅi vardÄ±r. Virginia'daki Hampden-Sydney College'dan Latince profesÃ¶rÃ¼ Richard McClintock, bir Lorem Ipsum pasajÄ±nda geÃ§en ve anlaÅÄ±lmasÄ± en gÃ¼Ã§ sÃ¶zcÃ¼klerden biri olan 'consectetur' sÃ¶zcÃ¼ÄÃ¼nÃ¼n klasik edebiyattaki Ã¶rneklerini incelediÄinde kesin bir kaynaÄa ulaÅmÄ±ÅtÄ±r. Lorm Ipsum, ÃiÃ§ero tarafÄ±ndan M.Ã. 45 tarihinde kaleme alÄ±nan  (Ä°yi ve KÃ¶tÃ¼nÃ¼n UÃ§ SÄ±nÄ±rlarÄ±) eserinin 1.10.32 ve 1.10.33 sayÄ±lÄ± bÃ¶lÃ¼mlerinden gelmektedir. Bu kitap, ahlak kuramÄ± Ã¼zerine bir tezdir ve RÃ¶nesans dÃ¶neminde Ã§ok popÃ¼ler olmuÅtur. Lorem Ipsum pasajÄ±nÄ±n ilk satÄ±rÄ± olan Lorem ipsum dolor sit amet 1.10.32 sayÄ±lÄ± bÃ¶lÃ¼mdeki bir satÄ±rdan gelmektedir. 1500'lerden beri kullanÄ±lmakta olan standard Lorem Ipsum metinleri ilgilenenler iÃ§in yeniden Ã¼retilmiÅtir. ÃiÃ§ero tarafÄ±ndan yazÄ±lan 1.10.32 ve 1.10.33 bÃ¶lÃ¼mleri de 1914 H. Rackham Ã§evirisinden alÄ±nan Ä°ngilizce sÃ¼rÃ¼mleri eÅliÄinde Ã¶zgÃ¼n biÃ§iminden yeniden Ã¼retilmiÅtir. Nereden Bulabilirim? Lorem Ipsum pasajlarÄ±nÄ±n birÃ§ok Ã§eÅitlemesi vardÄ±r. Ancak bunlarÄ±n bÃ¼yÃ¼k bir Ã§oÄunluÄu mizah katÄ±larak veya rastgele sÃ¶zcÃ¼kler eklenerek deÄiÅtirilmiÅlerdir. EÄer bir Lorem Ipsum pasajÄ± kullanacaksanÄ±z, metin aralarÄ±na utandÄ±rÄ±cÄ± sÃ¶zcÃ¼kler gizlenmediÄinden emin olmanÄ±z gerekir. Ä°nternet'teki tÃ¼m Lorem Ipsum Ã¼reteÃ§leri Ã¶nceden belirlenmiÅ metin bloklarÄ±nÄ± yineler. Bu da, bu Ã¼reteci Ä°nternet Ã¼zerindeki gerÃ§ek Lorem Ipsum Ã¼reteci yapar. Bu Ã¼reteÃ§, 200'den fazla Latince sÃ¶zcÃ¼k ve onlara ait cÃ¼mle yapÄ±larÄ±nÄ± iÃ§eren bir sÃ¶zlÃ¼k kullanÄ±r. Bu nedenle, Ã¼retilen Lorem Ipsum metinleri yinelemelerden, mizahtan ve karakteristik olmayan sÃ¶zcÃ¼klerden uzaktÄ±r. 5 paragraf sÃ¶zcÃ¼k karakter liste 'Lorem ipsum dolor sit amet...' ile baÅlat" />


                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/fullCastTextview"
                    style="@style/TextFieldStyle.Bold"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@color/windowBackgroundColor"
                    android:padding="@dimen/small_margin"
                    android:text="@string/fullCastAndCrew"
                    android:visibility="gone"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/overview" />

                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/crewRecyclerView"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/white"
                    android:orientation="horizontal"
                    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/fullCastTextview" />


                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/similarVideosTextview"
                    style="@style/TextFieldStyle.Bold"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@color/windowBackgroundColor"
                    android:padding="@dimen/small_margin"
                    android:text="@string/similarMovies"
                    android:visibility="gone"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/crewRecyclerView" />


                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/similarMoviesRecyclerView"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/white"
                    android:orientation="horizontal"
                    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/similarVideosTextview" />
            </androidx.constraintlayout.widget.ConstraintLayout>

        </androidx.core.widget.NestedScrollView>

        <include
            layout="@layout/loading_state"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="8dp"
            android:layout_marginTop="8dp"
            android:layout_marginEnd="8dp"
            android:layout_marginBottom="8dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintVertical_bias="0.7"
            app:retryCallback="@{() -> retryCallback.retry()}"
            app:resource="@{(Resource) response}" />

    </androidx.constraintlayout.widget.ConstraintLayout>
</layout>